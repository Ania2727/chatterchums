<h2>User Complaints</h2>

<div class="complaints-list">
    {% for complaint in complaints %}
        <div class="complaint-item">
            <div class="complaint-header">
                <span class="complaint-id">#{{ complaint.id|stringformat:"03d" }}</span>
                <span class="complaint-type">{{ complaint.get_complaint_type_display }}</span>
                <span class="complaint-date">{{ complaint.complaint_time|date:"Y-m-d" }}</span>
            </div>
            <div class="complaint-details">
                <p><strong>Reported by:</strong> {{ complaint.author.username }}</p>

                <p><strong>Target:</strong>
                    {% if complaint.user_target %}
                        User: {{ complaint.user_target.username }}
                    {% elif complaint.forum_target %}
                        Forum: <a href="{% url 'forums:forum_detail' complaint.forum_target.id %}">{{ complaint.forum_target.title }}</a>
                    {% elif complaint.topic_target %}
                        Topic: <a href="{% url 'forums:topic_detail' complaint.topic_target.forum.id complaint.topic_target.id %}">{{ complaint.topic_target.title }}</a>
                    {% elif complaint.comment_target %}
                        Comment by {{ complaint.comment_target.author.username }}
                    {% endif %}
                </p>

                <p><strong>Reason:</strong> {{ complaint.get_complaint_type_display }}</p>
                <p><strong>Content:</strong> "{{ complaint.complaint_text }}"</p>
            </div>
            <div class="complaint-actions">
                <button class="btn btn-success">Ignore</button>
                <button class="btn btn-warning">Delete Post</button>
                <button class="btn btn-danger">Ban User</button>
            </div>
        </div>
    {% empty %}
        <p>No complaints submitted yet.</p>
    {% endfor %}
</div>

<style>
.complaint-item {
    border: 1px solid #ddd;
    border-radius: 5px;
    margin-bottom: 15px;
    padding: 15px;
}

.complaint-header {
    display: flex;
    gap: 15px;
    margin-bottom: 10px;
}

.complaint-id {
    font-weight: bold;
    color: #666;
}

.complaint-type {
    background: #ff6b6b;
    color: white;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 12px;
}

.complaint-actions {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}
</style>